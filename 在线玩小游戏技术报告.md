# 📄 在线小游戏配置技术报告

本报告旨在详细解释当前“街霸方块 GBA 在线玩”的配置细节，并探讨未来在博客中集成更多类型小游戏的技术可行性。

## 1. 当前 GBA 模拟器配置详解

我们采用了 **EmulatorJS**，这是一种目前业界领先的、基于网页的开源模拟器方案。

### 核心技术：WebAssembly (WASM)
- **原理**：模拟器的核心引擎（mGBA）是用 C/C++ 编写的。通过 WASM 技术，这些代码被编译成浏览器可以直接高效执行的指令流。
- **性能**：由于 WASM 避开了常规 JavaScript 的性能瓶颈，模拟器可以达到“原生级别”的运行速度，即使在配置较低的手机上也能顺畅运行。

### 配置关键点：
1.  **资源路径 (`EJS_pathtodata`)**：我们引用了稳定的 CDN 资源，确保加载速度快且不需要占用您博客服务器的大量带宽。
2.  **移动端优化 (`EJS_VirtualGamepad`)**：开启了虚拟触摸手柄。系统会自动检测是否为触屏设备，并提供符合掌机习惯的虚拟按键。
3.  **持久化存档 (`EJS_saveStep`)**：
    - **电池存档 (SRAM)**：模拟游戏内的存档功能。
    - **即时存读档 (State Save)**：模拟器的快照功能。
    - 所有存档均保存在浏览器的 **IndexedDB** 数据库中，刷新页面或重启浏览器进度均能保留。
4.  **自定义按键映射**：
    - **电脑端**：配置为 **WASD (移动)** + **J (A) / K (B)** + **U (L) / I (R)**，更贴近现代模拟器操作直觉。
    - **移动端**：支持 iPhone X 及其它全面屏手机的 **Safe Area (安全区)** 适配，防止 L/R 键被切出屏幕。
5.  **浏览器兼容性策略**：针对 Android 自带浏览器（如 VIVO/VIA）实施了特殊的单线程加载保障，以解决“Webmaster Error”或黑屏问题。

## 2. 还能添加什么类型的小游戏？

您的博客现在已经具备了强大的小游戏承载能力，未来可以添加以下类型：

### A. HTML5 / Canvas 游戏
- **可行性**：**极高**（例如您之前的“小鱼方块”）。
- **方式**：直接将游戏的 `index.html` 及相关 `js/css/images` 放到 `source` 下的一个子文件夹中，然后在博文中用 `iframe` 嵌入即可。
- **优势**：加载速度最快，完美适配手机浏览器，支持各种点击和触摸交互。

### B. 其他复古游戏机 (Retro Games)
- **支持平台**：FC (NES), SFC (SNES), N64, GB, GBC, NDS, PS1 等。
- **方式**：沿用当前的 EmulatorJS 方案，只需更改 `EJS_core` 参数和对应的 ROM 文件即可。

### C. Unity WebGL 游戏
- **可行性**：高。
- **要求**：需要现代浏览器支持 WebGL 2.0。Unity 导出的 WebGL 版本可以完美运行在博文中。

## 3. 以后如何快速配置？
我已经为您在 `backups/在线玩小游戏` 目录下做好了完整备份。如果您想添加新游戏，只需：
1.  在 `source` 下新建文件夹并放入游戏文件。
2.  在对应的博文中使用 `iframe` 标签嵌入该文件夹的页面。

---
希望这份报告能帮您更好地管理和扩展您的博客游戏体验！
